@startuml Database ER
!theme plain
skinparam backgroundColor #FFFFFF

title Zen Campus - Core ER

entity user {
  * id : BIGINT <<PK>>
  --
  username : VARCHAR
  role : VARCHAR
}

entity classroom {
  * id : BIGINT <<PK>>
}

entity reservation {
  * id : BIGINT <<PK>>
  --
  user_id : BIGINT <<FK>>
  classroom_id : BIGINT <<FK>>
  status : VARCHAR
}

entity approval_task {
  * id : BIGINT <<PK>>
  --
  reservation_id : BIGINT <<FK>>
}

entity lecture {
  * id : BIGINT <<PK>>
}

entity lecture_signup {
  * id : BIGINT <<PK>>
  --
  lecture_id : BIGINT <<FK>>
  user_id : BIGINT <<FK>>
}

entity equipment {
  * id : BIGINT <<PK>>
}

entity equipment_borrow {
  * id : BIGINT <<PK>>
  --
  equipment_id : BIGINT <<FK>>
  user_id : BIGINT <<FK>>
}

entity bus_route {
  * id : BIGINT <<PK>>
}

entity bus_trip {
  * id : BIGINT <<PK>>
  --
  route_id : BIGINT <<FK>>
}

entity bus_booking {
  * id : BIGINT <<PK>>
  --
  trip_id : BIGINT <<FK>>
  user_id : BIGINT <<FK>>
}

entity study_room {
  * id : BIGINT <<PK>>
}

entity seat {
  * id : BIGINT <<PK>>
  --
  study_room_id : BIGINT <<FK>>
}

entity seat_reservation {
  * id : BIGINT <<PK>>
  --
  seat_id : BIGINT <<FK>>
  user_id : BIGINT <<FK>>
}

entity message_template {
  * id : BIGINT <<PK>>
}

entity message {
  * id : BIGINT <<PK>>
  --
  user_id : BIGINT <<FK>>
}

entity sys_config {
  * config_key : VARCHAR <<PK>>
}

user ||--o{ reservation
classroom ||--o{ reservation
reservation ||--o| approval_task

lecture ||--o{ lecture_signup
user ||--o{ lecture_signup

equipment ||--o{ equipment_borrow
user ||--o{ equipment_borrow

bus_route ||--o{ bus_trip
bus_trip ||--o{ bus_booking
user ||--o{ bus_booking

study_room ||--o{ seat
seat ||--o{ seat_reservation
user ||--o{ seat_reservation

message_template ||--o{ message
user ||--o{ message

@enduml
